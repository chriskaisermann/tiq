!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Tiq=e()}(this,function(t){"use strict";function e(){this.queue=[],this.current=-1,this.shouldLoop=0,this.shouldPlay=!1}return e.prototype.add=function(t,e,o){if(o=o||1,!e||"function"!=typeof e)return console.error("Tiq: Invalid callback;"),this;for(var r=0;o>r;r++)this.queue.push([t,e]);return this},e.prototype.start=function(){var t,e=this,o=0,r=0,u=0;return e.shouldPlay=!0,e.beforeCallback&&e.beforeCallback.call(e),e.queue.length?(e.timer=setTimeout(function i(){if(!e.shouldPlay)return e.stop();var n=e.queue[++e.current][1];if(t===n?u++:u=0,n&&n.call(e,u),++o&&e.eachCallback&&e.eachCallback.call(e,e.current,o,u),e.current+1==e.queue.length){if(!e.shouldLoop||r++-e.shouldLoop===0)return e.afterCallback&&e.afterCallback.call(e),e.stop();e.loopCallback&&e.loopCallback.call(e,r),e.current=-1}t=n,e.timer=setTimeout(i,e.queue[e.current+1][0])},e.queue[0][0]),this):this},e.prototype.before=function(t){return this.beforeCallback=t,this},e.prototype.after=function(t){return this.afterCallback=t,this},e.prototype.loop=function(t){return t=t||-1,this.shouldLoop=t,this.start()},e.prototype.setQueue=function(t){return this.queue=t,this},e.prototype.stop=function(){return this.shouldPlay=!1,this.shouldLoop=0,clearTimeout(this.timer),this},e.prototype.iteration=function(t){return this.loopCallback=t,this},e.prototype.each=function(t){return this.eachCallback=t,this},e.prototype.repeat=function(t,e,o){return this.add(t,e,o)},e});