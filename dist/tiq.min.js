!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Tiq=e()}(this,function(t){"use strict";function e(){this.queue=[],this.current=-1,this.counter=0,this.shouldLoop=!1,this.shouldPlay=!1}return e.prototype.add=function(t,e){return e&&"function"==typeof e?(this.queue.push([t,e]),this):(console.error("Tiq: Invalid callback;"),this)},e.prototype.start=function(){var t=this;return t.shouldPlay=!0,t.beforeCallback&&t.beforeCallback.call(t),t.queue.length?(t.timer=setTimeout(function e(){if(!t.shouldPlay)return clearTimeout(t.timer),this;var o=t.queue[++t.current][1];if(o[1]&&o[1].call(t),++t.counter&&t.eachCallback&&t.eachCallback.call(t,t.current,t.counter),t.current+1==t.queue.length){if(!t.shouldLoop)return t.afterCallback&&t.afterCallback.call(t),t.stop();t.loopCallback&&t.loopCallback.call(t,++t.loopCount),t.current=-1}t.timer=setTimeout(e,t.queue[t.current+1][0])},t.queue[0][0]),this):this},e.prototype.before=function(t){return this.beforeCallback=t,this},e.prototype.after=function(t){return this.afterCallback=t,this},e.prototype.loop=function(){return this.shouldLoop=!0,this.loopCount=0,this.start(),this},e.prototype.setQueue=function(t){return this.queue=t,this},e.prototype.stop=function(){return this.shouldPlay=!1,this.shouldLoop=!1,clearTimeout(this.timer),this.counter=0,this},e.prototype.iteration=function(t){return this.loopCallback=t,this},e.prototype.each=function(t){return this.eachCallback=t,this},e});